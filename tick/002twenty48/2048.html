<!DOCTYPE html>
<html><head><style>
html, body {
  margin:0;
}
#canvas{
  width:600px;
  height:600px;
  background: #eee;
  position:absolute;
  top:50%;
  left:50%;
  margin:-300px 0 0 -300px;
  border-radius:3px;
}
</style></head><body><canvas id="canvas"></canvas></body><script>
const canvasEl = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const cssCanvasPixelWidth = parseInt(window.getComputedStyle(canvasEl).getPropertyValue('width').slice(0,-2));
const cssCanvasPixelHeight = parseInt(window.getComputedStyle(canvasEl).getPropertyValue('height').slice(0,-2));
if(cssCanvasPixelWidth && cssCanvasPixelHeight) {
  canvasEl.width = cssCanvasPixelWidth;
  canvasEl.height = cssCanvasPixelHeight;
}

var gameDim = 4;
var gameIterator = 0;

function setupGame() {
  let boxWidth = canvasEl.width / gameDim;
  let boxHeight = canvasEl.height / gameDim;
  for(let i=0;i<16;i++) {
    let xPos = boxWidth * ( i % gameDim );
    let yPos = boxHeight * ( Math.floor( i / gameDim ) % gameDim );

    ctx.fillStyle=i%2==0?"#aaa":"#f00";
    ctx.fillRect(xPos,yPos,boxWidth,boxHeight);

    var num = Math.pow(2,i+4);
    ctx.font = (90-num.toString().length*10)+"px Arial";
    ctx.fillStyle = "#000";
    ctx.textAlign = "center";
    ctx.fillText(num,xPos+70,yPos+95);
  }
}

function updateFrame() {
  gameIterator++;
}

window.onkeydown = function(e) {
  var key = e.which;
  var left = 37;
  var up = 38;
  var right = 39;
  var down = 40;
  var space = 32;
  var w = 87;
  var a = 65;
  var s = 83;
  var d = 68;

  if( key===up || key===w ) {
    //up
    console.log('up');
  } else if( key===down || key===s ) {
    //down
    console.log('down');
  } else if( key===left || key===a ) {
    //left
    console.log('left');
  } else if( key===right || key===d ) {
    //right
    console.log('right');
  } 
};

(function gameLoop() {
  let fps = 50;
  let millisecs = 1000/fps;
  document.addEventListener('DOMContentLoaded', x => {
    setupGame();
    setInterval( updateFrame, millisecs );
  }, false);
})();

</script>
</html>
